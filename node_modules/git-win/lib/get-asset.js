"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));

const osArch = require("./os-arch");

const getRelease = require("./get-release");
/**
 * 获取某个版本的git的发布信息
 *
 * @param {String} version 版本号
 * @returns {Promise<Object>} 发布信息
 */


function getAssets(_x) {
  return _getAssets.apply(this, arguments);
}

function _getAssets() {
  _getAssets = (0, _asyncToGenerator2.default)(function* (version) {
    const release = yield getRelease(version);
    const asset = release.assets.find(asset => /(\d+)-bit\.exe$/.test(asset.name) && RegExp.$1 === osArch);
    return asset;
  });
  return _getAssets.apply(this, arguments);
}

module.exports = getAssets;